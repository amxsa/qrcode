webpackJsonp([1],{176:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a(9);t.default={data:function(){return{times:"",CzyID:"",MerchantID:"",Mobile:"",MerchantName:"",options:[],list:[],loading:!1,applicationName:"",Order:[{id:1,label:"未支付"},{id:2,label:"已付款"},{id:3,label:"交易成功"},{id:4,label:"已关闭"},{id:5,label:"已撤销"},{id:6,label:"用户支付中"},{id:7,label:"转入退款"},{id:8,label:"支付失败"}],Order_status:"",OrderTableData:[],details_Visible:!1,OrderTableDataOne:"",Detail_data:{},currentPage:1,page_size:10,total:1,PageDisplay:!1,loadListing:!0,startTime:"",endTime:"",parent_uuid:"",organizational:[],ORG_Uuid:""}},created:function(){this.OrderStart(),this.Residential()},watch:{options:{handler:function(e,t){console.log("...........",e,t)}}},methods:{details_Click:function(e,t){var i=this;console.log(t),this.details_Visible=!0,this.OrderTableDataOne="";var r=JSON.parse(window.sessionStorage.getItem("user")),n={access_token:r.access_token,business_uuid:t.business_uuid,colour_sn:t.colour_sn};a.i(s.t)(n).then(function(e){0==e.code?i.OrderTableDataOne=e.content:i.$notify.error({title:"错误提示",message:e.message})})},handleSizeChange:function(e){console.log("每页 "+e+" 条"),this.currentPage=e,this.OrderStart()},handleCurrentChange:function(e){console.log("当前页: "+e),this.currentPage=e,this.OrderStart()},remoteMethod:function(e){var t=this;if(""!==e){this.loading=!0;var i=JSON.parse(window.sessionStorage.getItem("user")),r={access_token:i.access_token,name:e};a.i(s.p)(r).then(function(e){t.loading=!1,0==e.code?(t.options=e.content,0==t.options.length&&(t.MerchantName="")):t.$notify.error({title:"错误提示",message:e.message})})}else this.options=[],this.MerchantName=""},GetFocus:function(){this.options=[],this.MerchantName=""},Order_Search:function(){this.times[0];this.format(this.times[0],"yyyy-MM-dd HH:mm:ss"),""==this.ORG_Uuid&&""==this.CzyID&&""==this.Mobile&&""==this.MerchantName&&""==this.Order_status&&""==this.times?this.$notify({title:"警告",message:"请输入查询信息",type:"warning"}):""!=this.times?(this.startTime=this.get_unix_time(this.format(this.times[0],"yyyy-MM-dd HH:mm:ss")),this.endTime=this.get_unix_time(this.format(this.times[1],"yyyy-MM-dd HH:mm:ss")),this.OrderStart()):this.OrderStart()},format:function(e,t){var a=new Date(e),s=function(e){return(e<10?"0":"")+e};return t.replace(/yyyy|MM|dd|HH|mm|ss/g,function(e){switch(e){case"yyyy":return s(a.getFullYear());case"MM":return s(a.getMonth()+1);case"mm":return s(a.getMinutes());case"dd":return s(a.getDate());case"HH":return s(a.getHours());case"ss":return s(a.getSeconds())}})},get_unix_time:function(e){var t=e.replace(/-/g,"/");return new Date(t).getTime().toString().substr(0,10)},OrderStart:function(){var e=this,t=this,i=JSON.parse(window.sessionStorage.getItem("user")),r={access_token:i.access_token,colour_sn:this.CzyID,org_uuid:this.ORG_Uuid,mobile:this.Mobile,trade_state:this.Order_status,shop_name:this.MerchantName,create_time:this.startTime,end_time:this.endTime,page:this.currentPage,page_size:this.page_size};a.i(s.u)(r).then(function(a){0==a.code?(e.loadListing=!1,e.OrderTableData=a.content.data,e.total=a.content.total,a.content.total>10?e.PageDisplay=!0:e.PageDisplay=!1):(e.$notify.error({title:"错误提示",message:a.message}),"402"==a.code&&(t.$router.push({path:"/login"}),sessionStorage.removeItem("user")))})},Residential:function(e){var t=this,i=JSON.parse(window.sessionStorage.getItem("user")),r={params:{access_token:i.access_token,parent_uuid:this.parent_uuid}};a.i(s.v)(r).then(function(e){if(0==e.code){for(var a=[],s=0;s<e.content.list.length;s++){var i={label:e.content.list[s].name,value:e.content.list[s].uuid,children:[]};a.push(i)}t.organizational=a}else t.$notify.error({title:"错误提示",message:e.message}),"402"==e.code&&(t.$router.push({path:"/login"}),sessionStorage.removeItem("user"))})},structure:function(e){for(var t=this,i=0;i<e.length;i++)this.ORG_Uuid=e[e.length-1];if(1==e.length){var r=JSON.parse(window.sessionStorage.getItem("user")),n={params:{access_token:r.access_token,parent_uuid:e[0]}};a.i(s.v)(n).then(function(a){if(console.log(a),0==a.code){for(var s=0;s<t.organizational.length;s++)if(e[0]==t.organizational[s].value){for(var i=[],r=0;r<a.content.list.length;r++){var n={label:a.content.list[r].name,value:a.content.list[r].uuid,children:[]};i.push(n)}t.organizational[s].children=i}}else t.$notify.error({title:"错误提示",message:a.message}),"402"==a.code&&(t.$router.push({path:"/login"}),sessionStorage.removeItem("user"))})}else if(2==e.length){var l=JSON.parse(window.sessionStorage.getItem("user")),o={params:{access_token:l.access_token,parent_uuid:e[1]}};a.i(s.v)(o).then(function(a){if(console.log(a),0==a.code){for(var s=0;s<t.organizational.length;s++)if(e[0]==t.organizational[s].value)for(var i=0;i<t.organizational[s].children.length;i++)if(e[1]==t.organizational[s].children[i].value){for(var r=[],n=0;n<a.content.list.length;n++){var l={label:a.content.list[n].name,value:a.content.list[n].uuid,children:[]};r.push(l)}t.organizational[s].children[i].children=r}}else t.$notify.error({title:"错误提示",message:a.message}),"402"==a.code&&(t.$router.push({path:"/login"}),sessionStorage.removeItem("user"))})}else if(3==e.length){var c=JSON.parse(window.sessionStorage.getItem("user")),_={params:{access_token:c.access_token,parent_uuid:e[2]}};a.i(s.v)(_).then(function(a){if(console.log(a),0==a.code){for(var s=0;s<t.organizational.length;s++)if(e[0]==t.organizational[s].value)for(var i=0;i<t.organizational[s].children.length;i++)if(e[1]==t.organizational[s].children[i].value)for(var r=0;r<t.organizational[s].children[i].children.length;r++)if(e[2]==t.organizational[s].children[i].children[r].value){for(var n=[],l=0;l<a.content.list.length;l++){var o={label:a.content.list[l].name,value:a.content.list[l].uuid};n.push(o)}t.organizational[s].children[i].children[r].children=n}}else t.$notify.error({title:"错误提示",message:a.message}),"402"==a.code&&(t.$router.push({path:"/login"}),sessionStorage.removeItem("user"))})}},Export:function(){var e=JSON.parse(window.sessionStorage.getItem("user"));e.access_token,this.CzyID,this.ORG_Uuid,this.Mobile,this.Order_status,this.MerchantName,this.startTime,this.endTime,this.currentPage,this.page_size;window.location.href="http://check.account.colourlife.com/backend/order/excel?access_token="+e.access_token+"&colour_sn="+this.CzyID+"&org_uuid="+this.ORG_Uuid+"&mobile="+this.Mobile+"&trade_state="+this.Order_status+"&shop_name="+this.MerchantName+"&create_time="+this.startTime+"&end_time="+this.endTime+"&page="+this.currentPage+"&page_size="+this.page_size},NoticeWithdrawal:function(e,t){var i=this;console.log(t),this.$confirm("给【"+t.shop_name+"】发送提现通知, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e=JSON.parse(window.sessionStorage.getItem("user")),r={access_token:e.access_token,business_uuid:t.business_uuid,colour_sn:t.colour_sn};a.i(s.w)(r).then(function(e){console.log(e),0==e.code?i.$message({type:"success",message:"发送成功!"}):(i.$notify.error({title:"错误提示",message:e.message}),e.code)})}).catch(function(){i.$message({type:"info",message:"已取消发送"})})}}}},182:function(e,t,a){t=e.exports=a(5)(),t.push([e.i,".cell{text-align:center}li{list-style-type:none}.block{height:auto}.block li{float:left;margin:5px}.box_table{text-align:center}.OneOrder li,.Store_information li{height:30px}",""])},188:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tab-content"},[a("ul",{staticClass:"block"},[a("li",[a("span",{staticClass:"demonstration"},[e._v("请选择组织架构")]),e._v(" "),a("el-cascader",{staticStyle:{width:"500px"},attrs:{options:e.organizational,"change-on-select":"",size:"small"},on:{change:e.structure}})],1),e._v(" "),a("li",[a("span",{staticClass:"demonstration"},[e._v("时间")]),e._v(" "),a("el-date-picker",{attrs:{type:"datetimerange",placeholder:"选择时间范围",size:"small"},model:{value:e.times,callback:function(t){e.times=t},expression:"times"}})],1),e._v(" "),a("li",[a("span",{staticClass:"demonstration"},[e._v("彩之云订单号")]),e._v(" "),a("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入彩之云订单号",size:"small"},model:{value:e.CzyID,callback:function(t){e.CzyID=t},expression:"CzyID"}})],1),e._v(" "),a("li",[a("span",{staticClass:"demonstration"},[e._v("手机号码")]),e._v(" "),a("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入手机号码",size:"small"},model:{value:e.Mobile,callback:function(t){e.Mobile=t},expression:"Mobile"}})],1),e._v(" "),a("li",[a("span",{staticClass:"demonstration"},[e._v("商户名称")]),e._v(" "),a("el-select",{attrs:{multiple:!1,filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入商户关键词","remote-method":e.remoteMethod,focus:e.GetFocus,loading:e.loading,size:"small"},model:{value:e.MerchantName,callback:function(t){e.MerchantName=t},expression:"MerchantName"}},e._l(e.options,function(e){return a("el-option",{key:e.uuid,attrs:{label:e.name,value:e.name}})}))],1),e._v(" "),a("li",[a("span",{staticClass:"demonstration"},[e._v("订单状态")]),e._v(" "),a("el-select",{attrs:{placeholder:"请选择订单状态",size:"small"},model:{value:e.Order_status,callback:function(t){e.Order_status=t},expression:"Order_status"}},e._l(e.Order,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}))],1),e._v(" "),a("li",[a("el-button",{attrs:{type:"primary",icon:"search",size:"small"},on:{click:e.Order_Search}})],1)]),e._v(" "),a("div",{staticClass:"box_table"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadListing,expression:"loadListing"}],staticStyle:{width:"100%"},attrs:{data:e.OrderTableData,border:""}},[a("el-table-column",{attrs:{prop:"shop_name",label:"商户名称",width:"160"}}),e._v(" "),a("el-table-column",{attrs:{prop:"colour_sn",label:"彩之云订单号",width:"240"}}),e._v(" "),a("el-table-column",{attrs:{prop:"e1_name",label:"小区",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"e2_name",label:"事业部",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"e3_name",label:"大区",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"real_total_fee",label:"支付金额",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"payment_name",label:"支付方式"}}),e._v(" "),a("el-table-column",{attrs:{label:"订单状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.trade_state?a("el-tag",{attrs:{type:"primary"}},[e._v("未支付")]):e._e(),e._v(" "),2==t.row.trade_state?a("el-tag",{attrs:{type:"primary"}},[e._v("已付款")]):e._e(),e._v(" "),3==t.row.trade_state?a("el-tag",{attrs:{type:"primary"}},[e._v("交易成功")]):e._e(),e._v(" "),4==t.row.trade_state?a("el-tag",{attrs:{type:"primary"}},[e._v("已关闭")]):e._e(),e._v(" "),5==t.row.trade_state?a("el-tag",{attrs:{type:"primary"}},[e._v("已撤销")]):e._e(),e._v(" "),6==t.row.trade_state?a("el-tag",{attrs:{type:"primary"}},[e._v("用户支付中")]):e._e(),e._v(" "),7==t.row.trade_state?a("el-tag",{attrs:{type:"primary"}},[e._v("转入退款")]):e._e(),e._v(" "),8==t.row.trade_state?a("el-tag",{attrs:{type:"primary"}},[e._v("支付失败")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"mobile",label:"手机号码"}}),e._v(" "),a("el-table-column",{attrs:{label:"创单时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("time")(t.row.time_pay)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.details_Click(t.$index,t.row)}}},[e._v("查看")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.NoticeWithdrawal(t.$index,t.row)}}},[e._v("通知")])]}}])})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"订单详情","close-on-click-modal":!1},model:{value:e.details_Visible,callback:function(t){e.details_Visible=t},expression:"details_Visible"}},[a("ul",{staticClass:"OneOrder"},[a("li",[e._v("\n                商户名称："+e._s(e.OrderTableDataOne.shop_name)+"\n            ")]),e._v(" "),a("li",[e._v("\n                彩之云订单号："+e._s(e.OrderTableDataOne.colour_sn)+"\n            ")]),e._v(" "),a("li",[e._v("\n                商户订单号："+e._s(e.OrderTableDataOne.out_trade_no)+"\n            ")]),e._v(" "),a("li",[e._v("\n                用户标识："+e._s(e.OrderTableDataOne.open_id)+"\n            ")]),e._v(" "),a("li",[e._v("\n                手机号码："+e._s(e.OrderTableDataOne.mobile)+"\n            ")]),e._v(" "),a("li",[e._v("\n                订单金额："+e._s(e.OrderTableDataOne.meal_total_fee)+"\n            ")]),e._v(" "),a("li",[e._v("\n                支付金额："+e._s(e.OrderTableDataOne.total_fee)+"\n            ")]),e._v(" "),a("li",[e._v("\n                支付方式："+e._s(e.OrderTableDataOne.payment_uuid)+"\n            ")]),e._v(" "),a("li",[e._v("\n                支付折扣率："+e._s(e.OrderTableDataOne.discount)+"\n            ")]),e._v(" "),a("li",[e._v("\n                商品描述："+e._s(e.OrderTableDataOne.body)+"\n            ")]),e._v(" "),a("li",[e._v("\n                商品详情："+e._s(e.OrderTableDataOne.detail)+"\n            ")]),e._v(" "),a("li",[e._v("终端IP:"+e._s(e.OrderTableDataOne.spbill_create_ip))]),e._v(" "),a("li",[e._v("交易开始时间："+e._s(e._f("time")(e.OrderTableDataOne.time_start)))]),e._v(" "),a("li",[e._v("交易结束时间："+e._s(e._f("time")(e.OrderTableDataOne.time_expire)))]),e._v(" "),a("li",[e._v("\n                订单状态：\n                "),1==e.OrderTableDataOne.trade_state?a("el-tag",{attrs:{type:"primary"}},[e._v("未支付")]):e._e(),e._v(" "),2==e.OrderTableDataOne.trade_state?a("el-tag",{attrs:{type:"primary"}},[e._v("已付款")]):e._e(),e._v(" "),3==e.OrderTableDataOne.trade_state?a("el-tag",{attrs:{type:"primary"}},[e._v("交易成功")]):e._e(),e._v(" "),4==e.OrderTableDataOne.trade_state?a("el-tag",{attrs:{type:"primary"}},[e._v("已关闭")]):e._e(),e._v(" "),5==e.OrderTableDataOne.trade_state?a("el-tag",{attrs:{type:"primary"}},[e._v("已撤销")]):e._e(),e._v(" "),6==e.OrderTableDataOne.trade_state?a("el-tag",{attrs:{type:"primary"}},[e._v("用户支付中")]):e._e(),e._v(" "),7==e.OrderTableDataOne.trade_state?a("el-tag",{attrs:{type:"primary"}},[e._v("转入退款")]):e._e(),e._v(" "),8==e.OrderTableDataOne.trade_state?a("el-tag",{attrs:{type:"primary"}},[e._v("支付失败")]):e._e()],1),e._v(" "),a("li",[e._v("创单时间："+e._s(e._f("time")(e.OrderTableDataOne.time_create)))]),e._v(" "),a("li",[e._v("支付时间："+e._s(e._f("time")(e.OrderTableDataOne.time_expire)))])]),e._v(" "),a("ul",{staticClass:"Store_information"},[a("li",[e._v("小区UUID："+e._s(e.OrderTableDataOne.community_uuid))]),e._v(" "),a("li",[e._v("应用名称："+e._s(e.OrderTableDataOne.community_name))])])]),e._v(" "),a("el-alert",{attrs:{title:"备注：若没有筛选条件，默认导出全部订单数据。",type:"info",closable:!1}}),e._v(" "),a("el-button",{staticStyle:{margin:"10px 0 5px 35px"},attrs:{type:"primary",icon:"el-icon-download"},on:{click:e.Export}},[e._v("导出")]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.PageDisplay,expression:"PageDisplay"}],staticStyle:{float:"right",margin:"10px 35px"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.page_size,layout:"prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t}}})],1)],1)},staticRenderFns:[]}},194:function(e,t,a){var s=a(182);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);a(8)("7af611cb",s,!0)},50:function(e,t,a){function s(e){a(194)}var i=a(6)(a(176),a(188),s,null,null);e.exports=i.exports}});
//# sourceMappingURL=1.build.js.map