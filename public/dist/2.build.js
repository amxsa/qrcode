webpackJsonp([2],{175:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=r(9);t.default={props:{},data:function(){return{currentPage:1,page_size:10,total:1,PageDisplay:!1,radio:1,modes:1,state:"",Money:"",restaurants:[],Subjects:"",IncomeSources:"",OrderNumbers:"",SubjectName:"",DividedS:"",Proportion:"",MoneyUpper:"",MoneyLower:"",mode:"",SubjectNameS:[{value:"1",label:"按订单奖励固定金额"},{value:"2",label:"按交易金额百分比"},{value:"3",label:"按交易金额百分比Pro"},{value:"4",label:"剩余"}],Rounding:"",RoundingS:[{value:"1",label:"保留2位小数"},{value:"2",label:"向上取整"},{value:"3",label:"向下取整"}],status:"",GE_DETAILS:[],personnelS:!1,addLoading:!1,ruleForm:{mode:"",map_id:"",split_type:1,split_target:"",split_target_name:"",finance_cano:"",finance_cno:"",amount:"",percent:"",upper_limit:"",lower_limit:"",truncate:"",state:1,remark:""},ruleFormRules:{mode:[{required:!0,message:"请选择分成方式",trigger:"blur"}]},organizational:[],loading:!1,OrgPost:[],jobSwitch:!1,org_JobArray:[],EditAccounts:!1,split_target_Uuid:"",EditForm:{split_id:"",state:"",remark:""},EditFormRules:{state:[{required:!0,message:"请选择状态",trigger:"change"}]},loadListing:!0}},created:function(){this.DetailsStart()},methods:{handleSizeChange:function(e){console.log("每页 "+e+" 条"),this.currentPage=e,this.DetailsStart()},handleCurrentChange:function(e){console.log("当前页: "+e),this.currentPage=e,this.DetailsStart()},blackPage:function(){this.$router.go(-1)},DetailsStart:function(){var e=this,t=this,a=JSON.parse(window.sessionStorage.getItem("user")),o={access_token:a.access_token,business_uuid:this.$route.query.business_uuid,map_id:this.$route.query.map_id,page:this.currentPage,page_size:this.page_size};r.i(l.b)(o).then(function(r){0==r.code?(e.loadListing=!1,e.GE_DETAILS=r.content.list,e.total=r.content.total,r.content.total>10?e.PageDisplay=!0:e.PageDisplay=!1):(e.$notify.error({title:"错误提示",message:r.message}),"402"==r.code&&(t.$router.push({path:"/login"}),sessionStorage.removeItem("user")))})},add_endForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;if(t.ruleForm.map_id=t.$route.query.map_id,1==t.ruleForm.split_type)t.ruleForm.split_target_name=t.ruleForm.split_target;else if(2==t.ruleForm.split_type)for(var r=0;r<t.org_JobArray.length;r++)t.org_JobArray[r].uuid==t.ruleForm.split_target&&(t.ruleForm.split_target_name=t.org_JobArray[r].job_type+"("+t.org_JobArray[r].realname+")");else if(3==t.ruleForm.split_type)for(var r=0;r<t.organizational.length;r++)t.organizational[r].uuid==t.ruleForm.split_target&&(t.ruleForm.split_target_name=t.organizational[r].name);var l=JSON.parse(window.sessionStorage.getItem("user")),a={access_token:l.access_token},o=t.ruleForm,i=Object.assign(a,o);t.function_add(i)})},function_add:function(e){var t=this;r.i(l.c)(e).then(function(e){0==e.code?(t.ruleForm.mode="",t.ruleForm.map_id="",t.ruleForm.split_type=1,t.ruleForm.split_target="",t.ruleForm.split_target_name="",t.ruleForm.finance_cano="",t.ruleForm.finance_cno="",t.ruleForm.amount="",t.ruleForm.percent="",t.ruleForm.upper_limit="",t.ruleForm.lower_limit="",t.ruleForm.truncate="",t.ruleForm.state="",t.ruleForm.remark="",t.DetailsStart(),t.personnelS=!1):t.$notify.error({title:"错误提示",message:e.message})})},details_Click:function(){this.$router.push({path:"/Merchant_details"})},AddPersonnel:function(){this.personnelS=!0},XZ_FCF:function(e){this.modes=e},EditPersonnel:function(e,t){this.EditAccounts=!0,this.EditForm.state=t.state,this.EditForm.remark=t.remark,this.EditForm.split_id=t.id},Edit_end:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;var a=JSON.parse(window.sessionStorage.getItem("user")),o={access_token:a.access_token},i=t.EditForm,s=Object.assign(o,i);r.i(l.d)(s).then(function(e){0==e.code?(t.DetailsStart(),t.EditAccounts=!1):t.$notify.error({title:"错误提示",message:e.message})})})},remoteMethod:function(e){var t=this,a=JSON.parse(window.sessionStorage.getItem("user")),o={access_token:a.access_token,business_uuid:this.$route.query.business_uuid,keyword:e};""!==e?(this.loading=!0,r.i(l.e)(o).then(function(e){0==e.code?(t.loading=!1,t.organizational=e.content.list.list):t.$notify.error({title:"错误提示",message:e.message})})):this.organizational=[]},OrgMethod:function(e){var t=this,a=JSON.parse(window.sessionStorage.getItem("user")),o={access_token:a.access_token,business_uuid:this.$route.query.business_uuid,keyword:e};""!==e?(this.loading=!0,r.i(l.e)(o).then(function(e){0==e.code?(t.loading=!1,t.OrgPost=e.content.list.list):t.$notify.error({title:"错误提示",message:e.message})})):this.organizational=[]},orgChang:function(e){var t=this,a=JSON.parse(window.sessionStorage.getItem("user")),o={access_token:a.access_token,business_uuid:this.$route.query.business_uuid,org_uuid:e};r.i(l.f)(o).then(function(e){0==e.code?(t.jobSwitch=!0,t.org_JobArray=e.content.list):t.$notify.error({title:"错误提示",message:e.message})})},orgTwo_Chang:function(e){this.ruleForm.split_target=e;for(var t=0;t<this.organizational.length;t++)if(this.organizational[t].uuid=e)return void(this.ruleForm.split_target_name=this.organizational[t].name)},JOBId:function(e){console.log(e),this.ruleForm.split_target=e;for(var t=0;t<this.org_JobArray.length;t++)if(this.org_JobArray[t].aj_uuid==e)return void(this.ruleForm.split_target_name=this.org_JobArray[t].job_type+"("+this.org_JobArray[t].realname+")")},split_type_Change:function(){this.ruleForm.split_target="",this.split_target_Uuid="",this.jobSwitch=!1,this.org_JobArray=[],this.organizational=[]}},mounted:function(){}}},178:function(e,t,r){t=e.exports=r(5)(),t.push([e.i,".el-form-item_label{width:100px}.cell{text-align:center}a{text-decoration:none}li{list-style-type:none}.block{height:auto;overflow:hidden}.block li{float:left;margin:0 10px}.box_table{text-align:center}",""])},184:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"tab-content"},[r("ul",{staticClass:"block"},[r("li",{staticStyle:{float:"right","margin-right":"100px"}},[r("el-button",{attrs:{plain:!0,type:"info",size:"small"},on:{click:e.AddPersonnel}},[e._v(" + 添加分成方")]),e._v(" "),r("el-button",{staticStyle:{display:"block",float:"right","margin-left":"20px"},attrs:{plain:!0,type:"info",size:"small"},on:{click:e.blackPage}},[e._v("返回")])],1)]),e._v(" "),r("div",{staticClass:"box_table"},[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadListing,expression:"loadListing"}],staticStyle:{width:"100%"},attrs:{data:e.GE_DETAILS,border:""}},[r("el-table-column",{attrs:{fixed:"",prop:"id",label:"序号",width:"80"}}),e._v(" "),r("el-table-column",{attrs:{prop:"split_target_name",label:"分成方",width:"200"}}),e._v(" "),r("el-table-column",{attrs:{prop:"finance_cano",label:"金融账号"}}),e._v(" "),r("el-table-column",{attrs:{prop:"finance_cno",label:"用户账号"}}),e._v(" "),r("el-table-column",{attrs:{prop:"split_type",label:"分成方式",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.mode?r("el-tag",{attrs:{type:"primary"}},[e._v("按订单奖励固定金额")]):e._e(),e._v(" "),2==t.row.mode?r("el-tag",{attrs:{type:"primary"}},[e._v("按交易金额百分比")]):e._e(),e._v(" "),3==t.row.mode?r("el-tag",{attrs:{type:"primary"}},[e._v("按交易金额百分比Pro")]):e._e(),e._v(" "),4==t.row.mode?r("el-tag",{attrs:{type:"primary"}},[e._v("剩余")]):e._e()]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"amount",label:"金额（元）",width:"80"}}),e._v(" "),r("el-table-column",{attrs:{prop:"percent",label:"比例（%）",width:"80"}}),e._v(" "),r("el-table-column",{attrs:{prop:"upper_limit",label:"金额上限",width:"100"}}),e._v(" "),r("el-table-column",{attrs:{prop:"lower_limit",label:"金额下限",width:"100"}}),e._v(" "),r("el-table-column",{attrs:{label:"取整方式",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.truncate?r("el-tag",{attrs:{type:"success"}},[e._v("保留2位小数")]):e._e(),e._v(" "),2==t.row.truncate?r("el-tag",{attrs:{type:"success"}},[e._v("向上取整")]):e._e(),e._v(" "),3==t.row.truncate?r("el-tag",{attrs:{type:"success"}},[e._v("向下取整")]):e._e()]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"create_at",label:"创建时间",width:"180"}}),e._v(" "),r("el-table-column",{attrs:{prop:"update_at",label:"修改时间",width:"180"}}),e._v(" "),r("el-table-column",{attrs:{prop:"creater",label:"创建人",width:"100"}}),e._v(" "),r("el-table-column",{attrs:{label:"是否可用"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.state?r("el-tag",{attrs:{type:"primary"}},[e._v("是")]):r("el-tag",{attrs:{type:"warning"}},[e._v("否")])]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"remark",label:"备注",width:"100"}}),e._v(" "),r("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"success",icon:"edit",size:"mini"},on:{click:function(r){e.EditPersonnel(t.$index,t.row)}}},[e._v("编辑")])]}}])})],1)],1),e._v(" "),r("el-dialog",{attrs:{title:"添加分成方","close-on-click-modal":!1},model:{value:e.personnelS,callback:function(t){e.personnelS=t},expression:"personnelS"}},[r("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,"label-width":"80px",rules:e.ruleFormRules}},[r("el-form-item",{attrs:{label:"分成方式:",prop:"mode","label-width":"120px"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择分成方式"},on:{change:e.XZ_FCF},model:{value:e.ruleForm.mode,callback:function(t){e.ruleForm.mode=t},expression:"ruleForm.mode"}},e._l(e.SubjectNameS,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"分成方类型:","label-width":"120px"}},[r("el-radio-group",{on:{change:e.split_type_Change},model:{value:e.ruleForm.split_type,callback:function(t){e.ruleForm.split_type=t},expression:"ruleForm.split_type"}},[r("el-radio",{attrs:{label:1}},[e._v("用户手机(外部对私)")]),e._v(" "),r("el-radio",{attrs:{label:2}},[e._v("岗位(内部对私)")]),e._v(" "),r("el-radio",{attrs:{label:3}},[e._v("组织结构(对公)")])],1)],1),e._v(" "),1==e.ruleForm.split_type?r("el-form-item",{attrs:{label:"分成方名称:","label-width":"120px"}},[r("el-input",{attrs:{placeholder:"请输入分成方手机号码"},model:{value:e.ruleForm.split_target,callback:function(t){e.ruleForm.split_target=t},expression:"ruleForm.split_target"}})],1):e._e(),e._v(" "),2==e.ruleForm.split_type?r("el-form-item",{attrs:{label:"分成方名称:","label-width":"120px"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",remote:"",placeholder:"请输入组织架构获取岗位","remote-method":e.OrgMethod,loading:e.loading},on:{change:e.orgChang},model:{value:e.split_target_Uuid,callback:function(t){e.split_target_Uuid=t},expression:"split_target_Uuid"}},e._l(e.OrgPost,function(e){return r("el-option",{key:e.uuid,attrs:{label:e.name,value:e.uuid}})})),e._v(" "),e.jobSwitch?r("el-radio-group",{on:{change:e.JOBId},model:{value:e.ruleForm.split_target,callback:function(t){e.ruleForm.split_target=t},expression:"ruleForm.split_target"}},e._l(e.org_JobArray,function(t){return r("el-radio",{staticStyle:{padding:"10px 10px"},attrs:{label:t.aj_uuid}},[e._v(e._s(t.job_type)+"("+e._s(t.realname)+")")])})):e._e()],1):e._e(),e._v(" "),3==e.ruleForm.split_type?r("el-form-item",{attrs:{label:"分成方名称:","label-width":"120px"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",remote:"",placeholder:"请输入组织架构名称","remote-method":e.remoteMethod,loading:e.loading},on:{change:e.orgTwo_Chang},model:{value:e.split_target_Uuid,callback:function(t){e.split_target_Uuid=t},expression:"split_target_Uuid"}},e._l(e.organizational,function(e){return r("el-option",{key:e.uuid,attrs:{label:e.name,value:e.uuid}})}))],1):e._e(),e._v(" "),1==e.modes?r("el-form-item",{attrs:{label:"金额¥(单位:分):","label-width":"120px"}},[r("el-input",{attrs:{placeholder:"如104.38元，请输入10438, 只能是整数"},model:{value:e.ruleForm.amount,callback:function(t){e.ruleForm.amount=t},expression:"ruleForm.amount"}})],1):e._e(),e._v(" "),2==e.modes||3==e.modes?r("el-form-item",{attrs:{label:"比例（%）:","label-width":"120px"}},[r("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.ruleForm.percent,callback:function(t){e.ruleForm.percent=t},expression:"ruleForm.percent"}})],1):e._e(),e._v(" "),3==e.modes?r("el-form-item",{attrs:{label:"金额上限:","label-width":"120px"}},[r("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.ruleForm.upper_limit,callback:function(t){e.ruleForm.upper_limit=t},expression:"ruleForm.upper_limit"}})],1):e._e(),e._v(" "),3==e.modes?r("el-form-item",{attrs:{label:"金额下限:","label-width":"120px"}},[r("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.ruleForm.lower_limit,callback:function(t){e.ruleForm.lower_limit=t},expression:"ruleForm.lower_limit"}})],1):e._e(),e._v(" "),r("el-form-item",{attrs:{label:"取整方式:","label-width":"120px"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择取整方式"},model:{value:e.ruleForm.truncate,callback:function(t){e.ruleForm.truncate=t},expression:"ruleForm.truncate"}},e._l(e.RoundingS,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"状态:","label-width":"120px"}},[r("el-radio-group",{model:{value:e.ruleForm.state,callback:function(t){e.ruleForm.state=t},expression:"ruleForm.state"}},[r("el-radio",{attrs:{label:1}},[e._v("正常")]),e._v(" "),r("el-radio",{attrs:{label:2}},[e._v("禁用")])],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"备注信息:","label-width":"120px"}},[r("el-input",{attrs:{type:"textarea",rows:3},model:{value:e.ruleForm.remark,callback:function(t){e.ruleForm.remark=t},expression:"ruleForm.remark"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.add_endForm("ruleForm")}}},[e._v("新增")])],1)],1)],1),e._v(" "),r("el-dialog",{attrs:{title:"编辑分成方","close-on-click-modal":!1},model:{value:e.EditAccounts,callback:function(t){e.EditAccounts=t},expression:"EditAccounts"}},[r("el-form",{ref:"EditForm",attrs:{model:e.EditForm,"label-width":"80px",rules:e.EditFormRules}},[r("el-form-item",{attrs:{label:"状态:","label-width":"120px"}},[r("el-radio-group",{model:{value:e.EditForm.state,callback:function(t){e.EditForm.state=t},expression:"EditForm.state"}},[r("el-radio",{attrs:{label:1}},[e._v("正常")]),e._v(" "),r("el-radio",{attrs:{label:2}},[e._v("禁用")])],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"备注信息:","label-width":"120px"}},[r("el-input",{attrs:{type:"textarea",rows:3},model:{value:e.EditForm.remark,callback:function(t){e.EditForm.remark=t},expression:"EditForm.remark"}})],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){e.Edit_end("EditForm")}}},[e._v("编辑完成")])],1)],1),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:e.PageDisplay,expression:"PageDisplay"}],staticStyle:{float:"right",margin:"10px 35px"}},[r("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.page_size,layout:"prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t}}})],1)],1)},staticRenderFns:[]}},190:function(e,t,r){var l=r(178);"string"==typeof l&&(l=[[e.i,l,""]]),l.locals&&(e.exports=l.locals);r(8)("349bdd6d",l,!0)},49:function(e,t,r){function l(e){r(190)}var a=r(6)(r(175),r(184),l,null,null);e.exports=a.exports}});
//# sourceMappingURL=2.build.js.map