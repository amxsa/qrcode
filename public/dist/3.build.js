webpackJsonp([3],{174:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s(9);t.default={props:{},data:function(){return{BJ_EditingRules:!1,AddingRules:!1,input1:"",radio:"1",SubjectsID:"",IncomeSources:"",OrderNumbers:"",options:[],SubjectName:"",SubjectName_01:"",SubjectID:"",SubjectNameS:[],status:"",BusinessName:"",BusinessID:"",DistributionRecordS:[],gz_state:1,Edit_SubjectName:"",map_id:"",Edit_radio:"",addFormRules:{name:[{required:!0,message:"请选择科目名称",trigger:"blur"}]},addForm:{remark:""},CreateRules:!1,currentPage:1,page_size:10,total:1,loading:!1,BusinessArray:[],YYKU_Income:"",is_copy:2,YYKU_name:"",accountArray:[],PageDisplay:!1,loadListing:!0}},created:function(){this.BusinessName=this.$route.query.businessName,this.start(),this.taglist()},methods:{handleSizeChange:function(e){console.log("每页 "+e+" 条"),this.currentPage=e,this.start()},handleCurrentChange:function(e){console.log("当前页: "+e),this.currentPage=e,this.start()},ExistingRules:function(e){},blackPage:function(){this.$router.go(-1)},funBusinessName:function(e){var t=this;this.accountArray=[];var a=JSON.parse(window.sessionStorage.getItem("user")),l={access_token:a.access_token,business_uuid:this.$route.query.business_uuid,name:e};s.i(i.g)(l).then(function(e){0==e.code?t.BusinessArray=e.content.list:t.$notify.error({title:"错误提示",message:e.message})})},orgBusinessChang:function(){var e=this,t=JSON.parse(window.sessionStorage.getItem("user")),a={access_token:t.access_token,business_uuid:this.$route.query.business_uuid};s.i(i.h)(a).then(function(t){0==t.code?e.accountArray=t.content.list:e.$notify.error({title:"错误提示",message:t.message})})},GE_details:function(e,t){this.$router.push({path:"/details",query:{map_id:t.id,business_uuid:t.business_uuid}})},TJ_GZ:function(){this.AddingRules=!0,this.SubjectNameS=[],this.SubjectsID="",this.taglist()},taglist:function(){var e=this,t=JSON.parse(window.sessionStorage.getItem("user")),a={access_token:t.access_token,business_uuid:this.$route.query.business_uuid};s.i(i.i)(a).then(function(t){0==t.code?(e.SubjectNameS=t.content.list,e.options=t.content.list):(e.$notify.error({title:"错误提示",message:t.message}),"402"==t.code&&(_this.$router.push({path:"/login"}),sessionStorage.removeItem("user")))})},SubjectSearch:function(){""==this.SubjectsID?this.$message("请选择科目"):this.start()},XZ_Subject:function(e){this.SubjectID=e},add_end:function(){var e=this;this.AddingRules=!1,this.CreateRules=!1;var t=JSON.parse(window.sessionStorage.getItem("user")),a={access_token:t.access_token,business_uuid:this.$route.query.business_uuid,tag_uuid:this.SubjectID,state:this.gz_state};s.i(i.j)(a).then(function(t){0==t.code?e.start():e.$notify.error({title:"错误提示",message:t.message})})},add_rule:function(){this.BusinessArray=[],this.accountArray=[];for(var e=0;e<this.SubjectNameS.length;e++)if(this.SubjectID==this.SubjectNameS[e].id)return this.SubjectName=this.SubjectNameS[e].name,void(this.CreateRules=!0)},DistributionDecord_Click:function(e,t){this.$router.push({path:"/DistributionDecord",query:{map_id:t.id,business_uuid:t.business_uuid,general_uuid:t.general_uuid,tag_uuid:t.tag_uuid}})},EditingRulesEdit:function(e,t){this.taglist(),this.Edit_SubjectName=t.tag_name,this.map_id=t.id,this.Edit_radio=t.state,this.BJ_EditingRules=!0,this.BusinessArray=[],this.accountArray=[],this.YYKU_Income="",this.YYKU_name=""},edit_rule:function(){var e=this;this.BJ_EditingRules=!1;var t=JSON.parse(window.sessionStorage.getItem("user")),a={access_token:t.access_token,business_uuid:this.$route.query.business_uuid,map_id:this.map_id,state:this.Edit_radio,remark:"",is_copy:this.is_copy,copy_business_uuid:this.YYKU_Income,copy_tag_uuid:this.YYKU_name};s.i(i.k)(a).then(function(t){0==t.code?(e.$notify({title:"成功",message:"修改成功",type:"success"}),e.start()):e.$notify.error({title:"错误",message:t.message})})},start:function(){var e=this,t=JSON.parse(window.sessionStorage.getItem("user")),a={access_token:t.access_token,business_uuid:this.$route.query.business_uuid,tag_uuid:this.SubjectsID,page:this.currentPage,page_size:this.page_size};s.i(i.l)(a).then(function(t){0==t.code?(e.loadListing=!1,e.DistributionRecordS=t.content.list,e.total=t.content.total,t.content.total>10?e.PageDisplay=!0:e.PageDisplay=!1):e.$notify.error({title:"错误提示",message:t.message})})}}}},181:function(e,t,s){t=e.exports=s(5)(),t.push([e.i,".cell{text-align:center}a{display:block;text-decoration:none;color:#1f2d3d}a:hover{color:#50bfff}li{list-style-type:none}.block{height:auto}.block li{float:left;margin:0 10px}.box_table{text-align:center}.Business_Name{height:35px;background:#50bfff;padding:0 0 0 20px}.Business_Name p{line-height:35px;text-align:left}",""])},187:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"tab-content"},[s("ul",{staticClass:"block"},[s("li",[s("span",{staticClass:"demonstration"},[e._v("选择科目")]),e._v(" "),s("el-select",{attrs:{placeholder:"请选择科目",size:"small"},model:{value:e.SubjectsID,callback:function(t){e.SubjectsID=t},expression:"SubjectsID"}},e._l(e.options,function(e){return s("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),s("el-button",{attrs:{type:"primary",icon:"search",size:"small"},on:{click:e.SubjectSearch}}),e._v(" "),s("li",{staticStyle:{float:"right","margin-right":"100px"}},[s("el-button",{attrs:{plain:!0,type:"info",size:"small"},on:{click:function(t){e.TJ_GZ()}}},[e._v(" + 添加规则")]),e._v(" "),s("el-button",{attrs:{plain:!0,type:"info",size:"small"},on:{click:e.blackPage}},[e._v("返回")])],1)],1),e._v(" "),s("div",{staticClass:"box_table"},[s("div",{staticClass:"Business_Name"},[s("p",[e._v("商户名称："+e._s(e.BusinessName))])]),e._v(" "),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadListing,expression:"loadListing"}],staticStyle:{width:"100%"},attrs:{data:e.DistributionRecordS,border:""}},[s("el-table-column",{attrs:{prop:"id",label:"分配编号",width:"100"}}),e._v(" "),s("el-table-column",{attrs:{prop:"tag_uuid",label:"科目ID"}}),e._v(" "),s("el-table-column",{attrs:{prop:"tag_name",label:"科目名称"}}),e._v(" "),s("el-table-column",{attrs:{prop:"create_at",label:"添加时间"}}),e._v(" "),s("el-table-column",{attrs:{prop:"update_at",label:"最新更新时间"}}),e._v(" "),s("el-table-column",{attrs:{label:"是否可用"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.state?s("el-tag",{attrs:{type:"primary"}},[e._v("是")]):s("el-tag",{attrs:{type:"warning"}},[e._v("否")])]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"creater",label:"创建人"}}),e._v(" "),s("el-table-column",{attrs:{label:"操作",width:"240"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{type:"success",icon:"edit",size:"mini"},on:{click:function(s){e.EditingRulesEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),s("el-button",{attrs:{type:"success",icon:"view",size:"mini"},on:{click:function(s){e.GE_details(t.$index,t.row)}}},[e._v("详情")]),e._v(" "),s("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(s){e.DistributionDecord_Click(t.$index,t.row)}}},[e._v("分配记录")])]}}])})],1)],1),e._v(" "),s("el-dialog",{attrs:{title:"添加规则","close-on-click-modal":!1,width:"50%"},model:{value:e.AddingRules,callback:function(t){e.AddingRules=t},expression:"AddingRules"}},[s("el-form",{ref:"addForm",attrs:{model:e.addForm,rules:e.addFormRules}},[s("el-form-item",{attrs:{label:"科目名称",prop:"name","label-width":"80px"}},[s("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请输入选择科目"},on:{change:e.XZ_Subject},model:{value:e.SubjectID,callback:function(t){e.SubjectID=t},expression:"SubjectID"}},e._l(e.SubjectNameS,function(e){return s("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer","label-width":"80px"},slot:"footer"},[s("el-button",{attrs:{type:"warning"},nativeOn:{click:function(t){e.AddingRules=!1}}},[e._v("取消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){e.add_rule()}}},[e._v("创建规则")])],1)],1),e._v(" "),s("el-dialog",{attrs:{title:"创建分账规则","close-on-click-modal":!1},model:{value:e.CreateRules,callback:function(t){e.CreateRules=t},expression:"CreateRules"}},[s("el-form",{ref:"addForm",attrs:{model:e.addForm,"label-width":"80px",rules:e.addFormRules}},[s("el-form-item",{attrs:{label:"科目:"}},[s("div",[e._v(e._s(e.SubjectName))])]),e._v(" "),s("el-form-item",[s("el-radio-group",{model:{value:e.is_copy,callback:function(t){e.is_copy=t},expression:"is_copy"}},[s("el-radio",{attrs:{label:2}},[e._v("新建规则")]),e._v(" "),s("el-radio",{attrs:{label:1}},[e._v("选择已有规则")])],1)],1),e._v(" "),1==e.is_copy?s("el-form-item",{attrs:{label:"商户名称"}},[s("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",remote:"",placeholder:"请输入选择商户名称","remote-method":e.funBusinessName,loading:e.loading},model:{value:e.YYKU_Income,callback:function(t){e.YYKU_Income=t},expression:"YYKU_Income"}},e._l(e.BusinessArray,function(e){return s("el-option",{key:e.uuid,attrs:{label:e.name,value:e.uuid}})}))],1):e._e(),e._v(" "),1==e.is_copy?s("el-form-item",{attrs:{label:"科目名称"}},[s("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请输入选择科目名称"},model:{value:e.YYKU_name,callback:function(t){e.YYKU_name=t},expression:"YYKU_name"}},e._l(e.accountArray,function(e){return s("el-option",{key:e.tag_uuid,attrs:{label:e.name,value:e.tag_uuid}})}))],1):e._e(),e._v(" "),2==e.is_copy?s("el-form-item",{attrs:{label:"是否可用:"}},[s("el-radio-group",{model:{value:e.gz_state,callback:function(t){e.gz_state=t},expression:"gz_state"}},[s("el-radio",{attrs:{label:1}},[e._v("是")]),e._v(" "),s("el-radio",{attrs:{label:2}},[e._v("否")])],1)],1):e._e(),e._v(" "),2==e.is_copy?s("el-form-item",{attrs:{label:"备注"}},[s("el-input",{attrs:{type:"textarea",rows:3},model:{value:e.addForm.remark,callback:function(t){e.addForm.remark=t},expression:"addForm.remark"}})],1):e._e()],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){e.add_end(t)}}},[e._v("完成")])],1)],1),e._v(" "),s("el-dialog",{attrs:{title:"编辑规则","close-on-click-modal":!1},model:{value:e.BJ_EditingRules,callback:function(t){e.BJ_EditingRules=t},expression:"BJ_EditingRules"}},[s("el-form",{ref:"addForm",attrs:{model:e.addForm,rules:e.addFormRules}},[s("el-form-item",{attrs:{label:"科目名称:","label-width":"80px"}},[s("div",[e._v(e._s(e.Edit_SubjectName))])]),e._v(" "),s("el-form-item",{attrs:{"label-width":"80px"}},[s("el-radio-group",{on:{change:e.ExistingRules},model:{value:e.is_copy,callback:function(t){e.is_copy=t},expression:"is_copy"}},[s("el-radio",{attrs:{label:2}},[e._v("新建规则")]),e._v(" "),s("el-radio",{attrs:{label:1}},[e._v("选择已有规则")])],1)],1),e._v(" "),1==e.is_copy?s("el-form-item",{attrs:{label:"商户名称","label-width":"80px"}},[s("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",remote:"",placeholder:"请输入关键词","remote-method":e.funBusinessName,loading:e.loading},on:{change:e.orgBusinessChang},model:{value:e.YYKU_Income,callback:function(t){e.YYKU_Income=t},expression:"YYKU_Income"}},e._l(e.BusinessArray,function(e){return s("el-option",{key:e.uuid,attrs:{label:e.name,value:e.uuid}})}))],1):e._e(),e._v(" "),1==e.is_copy?s("el-form-item",{attrs:{label:"科目名称","label-width":"80px"}},[s("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请输入选择科目"},model:{value:e.YYKU_name,callback:function(t){e.YYKU_name=t},expression:"YYKU_name"}},e._l(e.accountArray,function(e){return s("el-option",{key:e.tag_uuid,attrs:{label:e.name,value:e.tag_uuid}})}))],1):e._e(),e._v(" "),2==e.is_copy?s("el-form-item",{attrs:{label:"是否可用:","label-width":"80px"}},[s("el-radio-group",{model:{value:e.Edit_radio,callback:function(t){e.Edit_radio=t},expression:"Edit_radio"}},[s("el-radio",{attrs:{label:1}},[e._v("是")]),e._v(" "),s("el-radio",{attrs:{label:2}},[e._v("否")])],1)],1):e._e(),e._v(" "),2==e.is_copy?s("el-form-item",{attrs:{label:"备注","label-width":"80px"}},[s("el-input",{attrs:{type:"textarea",rows:3},model:{value:e.addForm.description,callback:function(t){e.addForm.description=t},expression:"addForm.description"}})],1):e._e()],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer","label-width":"80px"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){e.edit_rule(t)}}},[e._v("修改完成")])],1)],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.PageDisplay,expression:"PageDisplay"}],staticStyle:{float:"right",margin:"10px 35px"}},[s("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.page_size,layout:"prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t}}})],1)],1)},staticRenderFns:[]}},193:function(e,t,s){var i=s(181);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);s(8)("733242d2",i,!0)},48:function(e,t,s){function i(e){s(193)}var a=s(6)(s(174),s(187),i,null,null);e.exports=a.exports}});
//# sourceMappingURL=3.build.js.map